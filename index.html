<!DOCTYPE html>
<html>
<head>
    <title>Redirecting...</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
</head>
<body>
    <script type="text/javascript">
        function isInstagramBrowser() {
            return /Instagram/.test(navigator.userAgent);
        }

        function redirectToExternal() {
            const targetUrl = "https://shop.beacons.ai/monetizewithai/9dcc5e41-4d53-45e4-9217-529bebb44b0f";
            
            if (isInstagramBrowser()) {
                // For Android, use the Chrome intent with a timeout
                if (/Android/.test(navigator.userAgent)) {
                    setTimeout(function() {
                        window.location.href = `intent://${targetUrl}#Intent;scheme=https;package=com.android.chrome;end`;
                    }, 1000);
                } 
                // For iOS, attempt a delayed redirect to ensure Instagram doesn't block
                else if (/iPhone|iPad|iPod/.test(navigator.userAgent)) {
                    setTimeout(function() {
                        window.location.href = targetUrl;
                    }, 2000);
                }
            } else {
                window.location.href = targetUrl;
            }
        }

        // Add event listener for beforeunload to handle Instagram's verification
        window.addEventListener('beforeunload', function(e) {
            e.preventDefault();
            e.returnValue = '';
        });

        // Initialize the redirect when the page is loaded
        window.onload = function() {
            redirectToExternal();
        };
    </script>
</body>
</html>
