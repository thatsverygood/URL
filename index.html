const express = require("express");
const app = express();

app.get("/redirect", (req, res) => {
    const userAgent = req.headers["user-agent"] || "";
    const targetUrl = "https://shop.beacons.ai/monetizewithai/9dcc5e41-4d53-45e4-9217-529bebb44b0f";
    
    if (userAgent.includes("Instagram")) {
        if (/Android/.test(userAgent)) {
            res.redirect(`intent://${targetUrl}#Intent;scheme=https;package=com.android.chrome;end`);
        } else if (/iPhone|iPad|iPod/.test(userAgent)) {
            res.redirect(targetUrl);
        }
    } else {
        res.redirect(targetUrl);
    }
});

app.listen(3000, () => {
    console.log("Server running on port 3000");
});
